
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pip_services3_data.persistence package &#8212; Pip.Services Data for Python API</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pip_services3_data.persistence.FilePersistence module" href="pip_services3_data.persistence.FilePersistence.html" />
    <link rel="prev" title="pip_services3_data package" href="pip_services3_data.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pip_services3_data.persistence.FilePersistence.html" title="pip_services3_data.persistence.FilePersistence module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pip_services3_data.html" title="pip_services3_data package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Pip.Services Data for Python API</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >pip_services3_data</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="pip_services3_data.html" accesskey="U">pip_services3_data package</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pip-services3-data-persistence-package">
<h1>pip_services3_data.persistence package<a class="headerlink" href="#pip-services3-data-persistence-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="pip_services3_data.persistence.FilePersistence.html">pip_services3_data.persistence.FilePersistence module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pip_services3_data.persistence.FilePersistence.html#pip-services3-data-persistence-filepersistence">pip_services3_data.persistence.FilePersistence</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pip_services3_data.persistence.IdentifiableFilePersistence.html">pip_services3_data.persistence.IdentifiableFilePersistence module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pip_services3_data.persistence.IdentifiableFilePersistence.html#pip-services3-data-persistence-identifiablefilepersistence">pip_services3_data.persistence.IdentifiableFilePersistence</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pip_services3_data.persistence.IdentifiableMemoryPersistence.html">pip_services3_data.persistence.IdentifiableMemoryPersistence module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pip_services3_data.persistence.IdentifiableMemoryPersistence.html#pip-services3-data-persistence-identifiablememorypersistence">pip_services3_data.persistence.IdentifiableMemoryPersistence</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pip_services3_data.persistence.JsonFilePersister.html">pip_services3_data.persistence.JsonFilePersister module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pip_services3_data.persistence.JsonFilePersister.html#pip-services3-data-persistence-jsonfilepersister">pip_services3_data.persistence.JsonFilePersister</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pip_services3_data.persistence.MemoryPersistence.html">pip_services3_data.persistence.MemoryPersistence module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pip_services3_data.persistence.MemoryPersistence.html#pip-services3-data-persistence-memorypersistence">pip_services3_data.persistence.MemoryPersistence</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="module-pip_services3_data.persistence">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pip_services3_data.persistence" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pip-services3-data-persistence-init">
<h3>pip_services3_data.persistence.__init__<a class="headerlink" href="#pip-services3-data-persistence-init" title="Permalink to this headline">¶</a></h3>
<p>Contains various persistence implementations (InMemory and File –persistences). These are
“abstract” persistences, which only connect to data sources and do not implement the operations
and methods for working the data. The classes that extend these persistences must implement this
logic on their own.</p>
<p>Identifiable Persistences work with Identifiable objects, which have primary keys. A few standard
operations are defined by default for these objects: reading arrays and data pages; searching for
an object by its id; and creating, updating, and deleting records of objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Conceptual Vision Consulting LLC 2018-2019, see AUTHORS for more details.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">MIT, see LICENSE for more details.</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="pip_services3_data.persistence.MemoryPersistence">
<em class="property">class </em><code class="descclassname">pip_services3_data.persistence.</code><code class="descname">MemoryPersistence</code><span class="sig-paren">(</span><em>loader=None</em>, <em>saver=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.MemoryPersistence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_commons.refer.IReferenceable.IReferenceable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_commons.run.IOpenable.IOpenable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_commons.run.ICleanable.ICleanable</span></code></p>
<p>Abstract persistence component that stores data in memory.</p>
<p>This is the most basic persistence component that is only
able to store data items of any type. Specific CRUD operations
over the data items must be implemented in child classes by
accessing &lt;code&gt;this._items&lt;/code&gt; property and calling [[save]] method.</p>
<p>The component supports loading and saving items from another data source.
That allows to use it as a base class for file and other types
of persistence components that cache all data in memory.</p>
<dl class="docutils">
<dt>### References ###</dt>
<dd><ul class="first last simple">
<li><em>:logger:</em>:<a href="#id1"><span class="problematic" id="id2">*</span></a>:1.0   (optional) ILogger components to pass log messages</li>
</ul>
</dd>
<dt>Example:</dt>
<dd><p class="first">class MyMemoryPersistence(MemoryPersistence):</p>
<blockquote>
<div><dl class="docutils">
<dt>def get_by_name(self, correlationId, name):</dt>
<dd>item = self.find(name)
…
return item</dd>
</dl>
</div></blockquote>
<p>persistence = MyMemoryPersistence()</p>
<p class="last">persistence.set(“123”, MyData(“ABC”))
print str(persistence.get_by_name(“123”, “ABC”)))</p>
</dd>
</dl>
<dl class="method">
<dt id="pip_services3_data.persistence.MemoryPersistence.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><em>correlation_id</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.MemoryPersistence.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears component state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.MemoryPersistence.close">
<code class="descname">close</code><span class="sig-paren">(</span><em>correlation_id</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.MemoryPersistence.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes component and frees used resources.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.MemoryPersistence.is_opened">
<code class="descname">is_opened</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.MemoryPersistence.is_opened" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the component is opened.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">true if the component has been opened and false otherwise.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.MemoryPersistence.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>correlation_id</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.MemoryPersistence.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.MemoryPersistence.open">
<code class="descname">open</code><span class="sig-paren">(</span><em>correlation_id</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.MemoryPersistence.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens the component.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.MemoryPersistence.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>correlation_id</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.MemoryPersistence.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves items to external data source using configured saver component.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.MemoryPersistence.set_references">
<code class="descname">set_references</code><span class="sig-paren">(</span><em>references</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.MemoryPersistence.set_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets references to dependent components.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>references</strong> – references to locate the component dependencies.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence">
<em class="property">class </em><code class="descclassname">pip_services3_data.persistence.</code><code class="descname">IdentifiableMemoryPersistence</code><span class="sig-paren">(</span><em>loader=None</em>, <em>saver=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="pip_services3_data.persistence.MemoryPersistence.html#pip_services3_data.persistence.MemoryPersistence.MemoryPersistence" title="pip_services3_data.persistence.MemoryPersistence.MemoryPersistence"><code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_data.persistence.MemoryPersistence.MemoryPersistence</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_commons.config.IConfigurable.IConfigurable</span></code>, <a class="reference internal" href="pip_services3_data.IWriter.html#pip_services3_data.IWriter.IWriter" title="pip_services3_data.IWriter.IWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_data.IWriter.IWriter</span></code></a>, <a class="reference internal" href="pip_services3_data.IGetter.html#pip_services3_data.IGetter.IGetter" title="pip_services3_data.IGetter.IGetter"><code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_data.IGetter.IGetter</span></code></a>, <a class="reference internal" href="pip_services3_data.ISetter.html#pip_services3_data.ISetter.ISetter" title="pip_services3_data.ISetter.ISetter"><code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_data.ISetter.ISetter</span></code></a></p>
<p>Abstract persistence component that stores data in memory
and implements a number of CRUD operations over data items with unique ids.
The data items must implement IIdentifiable interface.</p>
<p>In basic scenarios child classes shall only override [[getPageByFilter]],
[[getListByFilter]] or [[deleteByFilter]] operations with specific filter function.
All other operations can be used out of the box.</p>
<p>In complex scenarios child classes can implement additional operations by
accessing cached items via this._items property and calling [[save]] method on updates.</p>
<p>### Configuration parameters ###</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>options:</dt>
<dd><ul class="first last">
<li>max_page_size:       Maximum number of items returned in a single page (default: 100)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>### References ###</p>
<blockquote>
<div><ul class="simple">
<li><em>:logger:</em>:<a href="#id3"><span class="problematic" id="id4">*</span></a>:1.0       (optional) ILogger components to pass log messages</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>Example:</dt>
<dd><p class="first">class MyMemoryPersistence(IdentifiableMemoryPersistence):</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>def get_page_by_filter(self, correlationId, filter, paging):</dt>
<dd>super().get_page_by_filter(correlationId, filter, paging, None)</dd>
</dl>
<p>persistence = MyMemoryPersistence(“./data/data.json”)</p>
<p>item = persistence.create(“123”, MyData(“1”, “ABC”))</p>
<p>mydata = persistence.get_page_by_filter(“123”, FilterParams.from_tuples(“name”, “ABC”), None, None)
print str(mydata.get_data())</p>
<p>persistence.delete_by_id(“123”, “1”)
…</p>
</div></blockquote>
</dd>
</dl>
<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.configure">
<code class="descname">configure</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures component by passing configuration parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config</strong> – configuration parameters to be set.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>correlation_id</em>, <em>item</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a data item.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</li>
<li><strong>item</strong> – an item to be created.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a created item</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.delete_by_filter">
<code class="descname">delete_by_filter</code><span class="sig-paren">(</span><em>correlation_id</em>, <em>filter</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.delete_by_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes data items that match to a given filter.</p>
<p>This method shall be called by a public deleteByFilter method from child class that
receives FilterParams and converts them into a filter function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</li>
<li><strong>filter</strong> – (optional) a filter function to filter items.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.delete_by_id">
<code class="descname">delete_by_id</code><span class="sig-paren">(</span><em>correlation_id</em>, <em>id</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.delete_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Deleted a data item by it’s unique id.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</li>
<li><strong>id</strong> – an id of the item to be deleted</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a deleted item.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.delete_by_ids">
<code class="descname">delete_by_ids</code><span class="sig-paren">(</span><em>correlation_id</em>, <em>ids</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.delete_by_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes multiple data items by their unique ids.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</li>
<li><strong>ids</strong> – ids of data items to be deleted.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.get_list_by_filter">
<code class="descname">get_list_by_filter</code><span class="sig-paren">(</span><em>correlation_id</em>, <em>filter</em>, <em>sort=None</em>, <em>select=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.get_list_by_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a list of data items retrieved by a given filter and sorted according to sort parameters.</p>
<p>This method shall be called by a public getListByFilter method from child class that
receives FilterParams and converts them into a filter function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</li>
<li><strong>filter</strong> – (optional) a filter function to filter items</li>
<li><strong>sort</strong> – (optional) sorting parameters</li>
<li><strong>select</strong> – (optional) projection parameters (not used yet)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a data list of results by filter.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.get_list_by_ids">
<code class="descname">get_list_by_ids</code><span class="sig-paren">(</span><em>correlation_id</em>, <em>ids</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.get_list_by_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a list of data items retrieved by given unique ids.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</li>
<li><strong>ids</strong> – ids of data items to be retrieved</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a data list of results by ids.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.get_one_by_id">
<code class="descname">get_one_by_id</code><span class="sig-paren">(</span><em>correlation_id</em>, <em>id</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.get_one_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a data item by its unique id.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</li>
<li><strong>id</strong> – an id of data item to be retrieved.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">data item by id.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.get_one_random">
<code class="descname">get_one_random</code><span class="sig-paren">(</span><em>correlation_id</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.get_one_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a random item from items that match to a given filter.</p>
<p>This method shall be called by a public getOneRandom method from child class
that receives FilterParams and converts them into a filter function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a random item.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.get_page_by_filter">
<code class="descname">get_page_by_filter</code><span class="sig-paren">(</span><em>correlation_id</em>, <em>filter</em>, <em>paging</em>, <em>sort=None</em>, <em>select=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.get_page_by_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a page of data items retrieved by a given filter and sorted according to sort parameters.</p>
<p>This method shall be called by a public getPageByFilter method from child class that
receives FilterParams and converts them into a filter function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</li>
<li><strong>filter</strong> – (optional) a filter function to filter items</li>
<li><strong>paging</strong> – (optional) paging parameters</li>
<li><strong>sort</strong> – (optional) sorting parameters</li>
<li><strong>select</strong> – (optional) projection parameters (not used yet)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a data page of result by filter.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.set">
<code class="descname">set</code><span class="sig-paren">(</span><em>correlation_id</em>, <em>item</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a data item. If the data item exists it updates it, otherwise it create a new data item.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</li>
<li><strong>item</strong> – an item to be set.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">an updated item</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>correlation_id</em>, <em>new_item</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates a data item.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</li>
<li><strong>new_item</strong> – an item to be updated.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">an updated item.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableMemoryPersistence.update_partially">
<code class="descname">update_partially</code><span class="sig-paren">(</span><em>correlation_id</em>, <em>id</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableMemoryPersistence.update_partially" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates only few selected fields in a data item.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</li>
<li><strong>id</strong> – an id of data item to be updated.</li>
<li><strong>data</strong> – a map with fields to be updated.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">an updated item.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pip_services3_data.persistence.FilePersistence">
<em class="property">class </em><code class="descclassname">pip_services3_data.persistence.</code><code class="descname">FilePersistence</code><span class="sig-paren">(</span><em>persister</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.FilePersistence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="pip_services3_data.persistence.MemoryPersistence.html#pip_services3_data.persistence.MemoryPersistence.MemoryPersistence" title="pip_services3_data.persistence.MemoryPersistence.MemoryPersistence"><code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_data.persistence.MemoryPersistence.MemoryPersistence</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_commons.config.IConfigurable.IConfigurable</span></code></p>
<p>Abstract persistence component that stores data in flat files and caches them in memory.</p>
<p>This is the most basic persistence component that is only
able to store data items of any type. Specific CRUD operations
over the data items must be implemented in child classes by
accessing this._items property and calling [[save]] method.</p>
<p>### Configuration parameters ###</p>
<blockquote>
<div><ul class="simple">
<li>path:                path to the file where data is stored</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>### References ###</dt>
<dd><ul class="first last simple">
<li><em>:logger:</em>:<a href="#id5"><span class="problematic" id="id6">*</span></a>:1.0   (optional) ILogger components to pass log messages</li>
</ul>
</dd>
<dt>Example:</dt>
<dd><dl class="first last docutils">
<dt>class MyJsonFilePersistence(FilePersistence):</dt>
<dd><dl class="first last docutils">
<dt>def __init__(self, path):</dt>
<dd>super(MyJsonFilePersistence, self).__init__(JsonPersister(path))</dd>
<dt>def get_by_name(self, correlationId, name):</dt>
<dd>item = self.find(name)
…
return item</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="pip_services3_data.persistence.FilePersistence.configure">
<code class="descname">configure</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.FilePersistence.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures component by passing configuration parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config</strong> – configuration parameters to be set.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pip_services3_data.persistence.IdentifiableFilePersistence">
<em class="property">class </em><code class="descclassname">pip_services3_data.persistence.</code><code class="descname">IdentifiableFilePersistence</code><span class="sig-paren">(</span><em>persister</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableFilePersistence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="pip_services3_data.persistence.IdentifiableMemoryPersistence.html#pip_services3_data.persistence.IdentifiableMemoryPersistence.IdentifiableMemoryPersistence" title="pip_services3_data.persistence.IdentifiableMemoryPersistence.IdentifiableMemoryPersistence"><code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_data.persistence.IdentifiableMemoryPersistence.IdentifiableMemoryPersistence</span></code></a></p>
<p>Abstract persistence component that stores data in flat files
and implements a number of CRUD operations over data items with unique ids.
The data items must implement IIdentifiable interface.</p>
<p>In basic scenarios child classes shall only override [[getPageByFilter]],
[[getListByFilter]] or [[deleteByFilter]] operations with specific filter function.
All other operations can be used out of the box.
In complex scenarios child classes can implement additional operations by
accessing cached items via this._items property and calling [[save]] method on updates.</p>
<p>### Configuration parameters ###</p>
<blockquote>
<div><ul class="simple">
<li>path:                    path to the file where data is stored</li>
<li><dl class="first docutils">
<dt>options:</dt>
<dd><ul class="first last">
<li>max_page_size:       Maximum number of items returned in a single page (default: 100)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>### References ###</p>
<blockquote>
<div><ul class="simple">
<li><em>:logger:</em>:<a href="#id7"><span class="problematic" id="id8">*</span></a>:1.0       (optional) ILogger components to pass log messages</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>Example:</dt>
<dd><dl class="first last docutils">
<dt>class MyFilePersistence(IdentifiableFilePersistence):</dt>
<dd><dl class="first docutils">
<dt>def __init__(self, path):</dt>
<dd>super(MyFilePersistence, self).__init__(JsonPersister(path))</dd>
<dt>def get_page_by_filter(self, correlationId, filter, paging):</dt>
<dd>super().get_page_by_filter(correlationId, filter, paging, None)</dd>
</dl>
<p>persistence = MyFilePersistence(“./data/data.json”)</p>
<p>item = persistence.create(“123”, MyData(“1”, “ABC”))</p>
<p>mydata = persistence.get_page_by_filter(“123”, FilterParams.from_tuples(“name”, “ABC”), None, None)
print str(mydata.get_data())</p>
<p class="last">persistence.delete_by_id(“123”, “1”)
…</p>
</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="pip_services3_data.persistence.IdentifiableFilePersistence.configure">
<code class="descname">configure</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.IdentifiableFilePersistence.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures component by passing configuration parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config</strong> – configuration parameters to be set.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pip_services3_data.persistence.JsonFilePersister">
<em class="property">class </em><code class="descclassname">pip_services3_data.persistence.</code><code class="descname">JsonFilePersister</code><span class="sig-paren">(</span><em>path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.JsonFilePersister" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="pip_services3_data.ILoader.html#pip_services3_data.ILoader.ILoader" title="pip_services3_data.ILoader.ILoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_data.ILoader.ILoader</span></code></a>, <a class="reference internal" href="pip_services3_data.ISaver.html#pip_services3_data.ISaver.ISaver" title="pip_services3_data.ISaver.ISaver"><code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_data.ISaver.ISaver</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pip_services3_commons.config.IConfigurable.IConfigurable</span></code></p>
<p>Persistence component that loads and saves data from/to flat file.</p>
<p>It is used by [[FilePersistence]], but can be useful on its own.</p>
<p>### Configuration parameters ###</p>
<blockquote>
<div><ul class="simple">
<li>path:          path to the file where data is stored</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>Example:</dt>
<dd><p class="first">persister = JsonFilePersister(MyData.class, “./data/data.json”)</p>
<p>persister.save(“123”, [“A”, “B”, “C”])
…</p>
<p class="last">persister.load(“123”, items)
print items</p>
</dd>
</dl>
<dl class="method">
<dt id="pip_services3_data.persistence.JsonFilePersister.configure">
<code class="descname">configure</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.JsonFilePersister.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures component by passing configuration parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config</strong> – configuration parameters to be set.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.JsonFilePersister.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>correlation_id</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.JsonFilePersister.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads data items from external JSON file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">loaded items</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pip_services3_data.persistence.JsonFilePersister.path">
<code class="descname">path</code><em class="property"> = None</em><a class="headerlink" href="#pip_services3_data.persistence.JsonFilePersister.path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pip_services3_data.persistence.JsonFilePersister.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>correlation_id</em>, <em>entities</em><span class="sig-paren">)</span><a class="headerlink" href="#pip_services3_data.persistence.JsonFilePersister.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves given data items to external JSON file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>correlation_id</strong> – (optional) transaction id to trace execution through call chain.</li>
<li><strong>entities</strong> – list if data items to save</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pip_services3_data.persistence package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-pip_services3_data.persistence">Module contents</a><ul>
<li><a class="reference internal" href="#pip-services3-data-persistence-init">pip_services3_data.persistence.__init__</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pip_services3_data.html"
                        title="previous chapter">pip_services3_data package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pip_services3_data.persistence.FilePersistence.html"
                        title="next chapter">pip_services3_data.persistence.FilePersistence module</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/pip_services3_data.persistence.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pip_services3_data.persistence.FilePersistence.html" title="pip_services3_data.persistence.FilePersistence module"
             >next</a> |</li>
        <li class="right" >
          <a href="pip_services3_data.html" title="pip_services3_data package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Pip.Services Data for Python API</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >pip_services3_data</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="pip_services3_data.html" >pip_services3_data package</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Conceptual Vision Consulting LLC.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
  </body>
</html>